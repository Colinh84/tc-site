function listActiveContest(e,t,n,r,i){var s=ajaxUrl;var o;switch(t){case"activeContest":o="get_active_contest";break;case"pastContest":o="get_past_contest";break;case"reviewOpportunities":o="get_review_opportunities";break}app.setLoading();$("#"+e+" .pagingWrapper").empty();$("#"+e+" .contestTable tbody").empty();$("#"+e+" .contestTable thead .head td").unbind("click");$.ajax({type:"GET",url:s,data:{action:o,contest_type:n,sortColumn:r,sortOrder:i},dataType:"json",success:function(n){hideLoader(e);if(n!="Error in processing request or Member dosen't exist"){contestData[""+e]=n;contestTableGoToPage(e,t,1);generatePagingButton(e)}},error:function(){alert("error")}})}function contestTableGoToPage(e,t,n){var r=n;$("#"+e+" .contestTable tbody").empty();var i=$("#"+e).find(".postPerPage").val();var s=contestData[""+e];if(s!=null){var o=s.length;var u=parseInt(o/i);if(o%i!=0)u++;if(r==1)$("#"+e+" .contestPrev").hide();else $("#"+e+" .contestPrev").show();if(r==u)$("#"+e+" .contestNext").hide();else $("#"+e+" .contestNext").show();var a=(n-1)*i;var f=n*i-1;var l=$("#"+e+" .contestTable thead .head").children();if(t=="activeContest"||t=="pastContest"){var c=0;$(l[0]).unbind("click").click(function(){listActiveContest(e,t,"","contestName")});$(l[1]).unbind("click").click(function(){listActiveContest(e,t,"","type")});$(l[2]).unbind("click").click(function(){listActiveContest(e,t,"","firstPrize")});$(l[3]).unbind("click").click(function(){listActiveContest(e,t,"","submissionEndDate")});for(var h=0;h<o;h++){if(h>=a&&h<=f){var p="";if(c%2==0){p="odd"}var d=s[h];var v=siteurl+"/contest-details/"+d.contestId;var m=t=="activeContest"?d.firstPrize:d.prize[0];var g='<tr class="'+p+'"><td><a href="'+v+'">'+d.contestName+" </a></td>";g+="<td>"+d.type+"</td>";g+='<td align="center"> $'+m+"</td>";g+='<td align="center">'+d.submissionEndDate+"</td></tr>";$("#"+e+" .contestTable tbody").append(g);c++}}}else if(t=="reviewOpportunities"){var c=0;$(l[0]).unbind("click").click(function(){listActiveContest(e,t,"","contestName")});$(l[1]).unbind("click").click(function(){listActiveContest(e,t,"","primaryReviewerPayment")});$(l[3]).unbind("click").click(function(){listActiveContest(e,t,"","reviewStart")});$(l[4]).unbind("click").click(function(){listActiveContest(e,t,"","numberOfReviewPositionsAvailable")});for(var h=0;h<o;h++){if(h>=a&&h<=f){var p="";if(c%2==0){p="odd"}var d=s[h];var v=siteurl+"/contest-details/"+d.contestId;var g='<tr class="'+p+'"><td>'+d.contestName+"</td>";g+='<td align="right"> $'+d.primaryReviewerPayment+"</td>";g+='<td align="center">'+d.submissionsNumber+"</td>";g+='<td align="center">'+d.reviewStart+"</td>";g+='<td align="center">'+d.numberOfReviewPositionsAvailable+"</td></tr>";$("#"+e+" .contestTable tbody").append(g);c++}}}}$("#"+e+" .contestPageNumber").removeClass("activePage");$("#"+e+" .contestPageNumber"+r).addClass("activePage");$("#"+e+" .contestTable tbody tr:even").addClass("odd")}function generatePagingButton(e){var t=contestData[""+e];var n=$("#"+e).find(".postPerPage").val();if(t!=null){var r=t.length;var i=parseInt(r/n);if(r%n!=0)i++;if(i>1){$("#"+e+" .pagingWrapper").append('<a href="javascript:;" class="contestPrev"><< Prev</a>');$("#"+e+" .contestPrev").hide();for(var s=1;s<=i;s++){$("#"+e+" .pagingWrapper").append('<a href="javascript:;" class="contestPageNumber contestPageNumber'+s+'">'+s+"</a>")}$("#"+e+" .contestPageNumber1").addClass("activePage");$("#"+e+" .pagingWrapper").append('<a href="javascript:;" class="contestNext">Next >></a>')}}}function get_member_details(e){var t=ajaxUrl;var n="get_member_profile";app.setLoading();$.ajax({type:"GET",url:t,data:{action:n,handle:e},dataType:"json",success:function(t){if(t!="Error in processing request or Member dosen't exist"){var n=t.quote==""?"Member of the world largest global competitive community.":t.quote;var r=t.memberSince;var i=t.ratingsSummary;var s=t.isCopilot;$("#memberQuote").html(n);$("#handle").html(t.handle);var o="";var u=0;for(var a=0;a<i.length;a++){if(i[a].rating>u){o=i[a].colorStyle;u=i[a].rating}}if(o!=""){var f=o.substring(7,14);$(".memberProfile .handle").css("color",f)}if(t.photoLink!=null){var l="http://www.topcoder.com"+t.photoLink;$(".memberProfilePicture img").attr("src",l)}$("#memberSince .alignRight").html(r.substring(0,10));$("#country .alignCenter").html(t.country);get_user_achievements(e,s.value)}},error:function(){alert("error")}})}function get_user_achievements(e,t){var n=ajaxUrl;var r="get_user_achievement";$.ajax({type:"GET",url:n,data:{action:r,handle:e},dataType:"json",success:function(n){if(n!="Error in processing request or Member dosen't exist"){$.each(n,function(e,t){var n=t.date;n=n.substring(0,10);var r=t.badgeLink;var i=r.url;var s=r.topOffset;var o=r.leftOffset;var u=t.description;var a='<tr><td class="date">'+n+'</td><td><span class="icon" style="background:url(\''+i+"') no-repeat "+o+"px "+s+'px;"></span><span class="desc">'+u+"</span></td></tr>";$(".coderAchievementTable tbody").append(a);$(".coderAchievementTable tbody tr:nth-child(even)").css("background-color","#eeeeee")});hideLoader("memberProfileContainer");if(t){get_copilot_stats(e)}}},error:function(){alert("error")}})}function get_copilot_stats(e){var t=ajaxUrl;var n="get_copilot_stats";showLoader("memberProfileContainer");$.ajax({type:"GET",url:t,data:{action:n,handle:e},dataType:"json",success:function(e){if(e!="Error in processing request or Member dosen't exist"){$.each(e,function(e,t){var n=t.contestType;var r=e==0?" active":"";var i="<div class='controller"+r+"' id='ctype"+e+"' onclick=\"copilotAchievementsGoTo("+e+")\"><div class='controllerWrapper'><span>"+n+"</span><span class='arrow'></span></div></div>";$("#copilotStats .palisade .leftControlMask").append(i);var s=e==0?"table":"none";var o="<table class='ctype"+e+"' style='display: "+s+";'>";o+="<tr>";o+="	<td>Number of Contests:</td>";o+="	<td class='number b'>"+t.numContests+"</td>";o+="</tr>";o+="<tr>";o+="	<td>Number of Reposts:</td>";o+="	<td class='number b'>"+t.numReposts+"</td>";o+="</tr>";o+="<tr>";o+="	<td>Number of Failures:</td>";o+="	<td class='number b'>"+t.numFailures+"</td>";o+="</tr>";o+="</tbody></table>";$("#copilotStats .palisade .right-area").append(o)});copilotAchievementsGoTo(0);$(".copilotAchivementAjax").show()}hideLoader("memberProfileContainer")},error:function(){alert("error")}})}function showLoader(e){$("#"+e+" .loadingOverlay").show();var t=$("#"+e+" .loadingOverlay").width();var n=$("#"+e+" .loadingOverlay").height();var r=144;var i=14;var s=(t-r)/2;var o=(n-i)/2;$("#"+e+" .loadingGif").css({top:o+"px",left:s+"px"})}function hideLoader(e){$("#"+e+" .loadingOverlay").hide()}function copilotAchievementsGoTo(e){$(".palisade .right-area table").hide();$(".palisade .left-control .controller").removeClass("active");$("#ctype"+e).addClass("active");$(".palisade .right-area table.ctype"+e).show()}var contestData=new Array;$(document).ready(function(){(function(e){e.fn.Selectyze=function(t){var r={theme:"css3",effectOpen:"slide",effectClose:"slide",preventClose:false};if(this.length)return this.each(function(){function l(t){if(t.has("optgroup").length){t.find("optgroup").each(function(t,n){f+='<li><span class="optgroupTitle">'+e(this).attr("label")+"</span><ul>";e(this).children().each(function(t,n){f+='<li><a rel="'+e(this).val()+'" href="#">'+e(this).text()+"</a></li>"});f+="</ul></li>"})}else{t.find("option").each(function(t,n){f+='<li><a rel="'+e(this).val()+'" href="#">'+e(this).text()+"</a></li>"})}}function c(e){switch(i.effectOpen){case"slide":if(!e.is(":hidden"))e.stop(true,true).slideUp("fast");else e.stop(true,true).slideDown("fast");break;case"fade":if(!e.is(":hidden"))e.stop(true,true).fadeOut("fast");else e.stop(true,true).fadeIn("fast");break;default:if(!e.is(":hidden"))e.stop(true,true).hide();else e.stop(true,true).show()}}function h(e){switch(i.effectClose){case"slide":e.stop(true,true).slideUp("fast");break;case"fade":e.stop(true,true).fadeOut("fast");break;default:e.hide()}}var i=e.extend(r,t),s=e(this),o=s.find("option").filter(":selected"),u=e("<div>",{"class":"DivSelectyze "+i.theme+""}),a=e("<ul>",{"class":"UlSelectize"}),f="";zIndex=9999;l(s);s.hide();s.after(u);u.html('<a href="#" rel="'+o.val()+'" class="selectyzeValue">'+o.text()+"</a>");a.appendTo(u).html(f);e(".DivSelectyze").each(function(t,n){e(this).css("z-index",zIndex);zIndex-=10});n=false;u.mouseenter(function(){n=false}).mouseleave(function(){n=true});u.find("a.selectyzeValue").click(function(t){t.preventDefault();h(e("ul.UlSelectize").not(e(this).next()));c(e(this).next("ul.UlSelectize"))});a.find("a").click(function(t){t.preventDefault();u.find("a.selectyzeValue").text(e(this).text());s.val(e(this).attr("rel"));s.trigger("change");if(!i.preventClose){h(s.next().find(".UlSelectize"))}});e(document).click(function(t){if(n)h(e(".UlSelectize").not(":hidden"))})})}})(jQuery);$(".selectyze").Selectyze({theme:"grey"});$(".coderAchievementTable tbody tr:nth-child(even)").css("background-color","#eeeeee");$(".search_contests_widget .btnSearch").click(function(){$(".btnSubmit",$(this).parents(".search_contests_widget:first")).click()});$("#activeContest").on("click",".contestPageNumber",function(){var e=parseInt($(this).html());var t=$(this).parent().parent().attr("id");contestTableGoToPage(""+t,e)});$("#activeContest").on("click",".contestNext",function(){var e=parseInt($(this).parent().parent().find(".activePage").html());var t=$(this).parent().parent().find(".contestPageNumber").length;var n=e+1;var r=$(this).parent().parent().attr("id");if(e<t){contestTableGoToPage(""+r,n)}});$("#activeContest").on("click",".contestPrev",function(){var e=parseInt($(this).parent().parent().find(".activePage").html());var t=$(this).parent().parent().find(".contestPageNumber").length;var n=e-1;var r=$(this).parent().parent().attr("id");if(n>0){contestTableGoToPage(""+r,n)}})});$.fn.inputTips=function(){return this.each(function(){var e=$.trim($(this).val());if(e==""||e==$(this).attr("data-placeholder")){$(this).val($(this).attr("data-placeholder"))}$(this).data("tips",$(this).attr("data-placeholder"));$(this).unbind("focusin.inputtips");$(this).unbind("focusout.inputtips");$(this).bind("focusin.inputtips",function(){var e=$.trim($(this).val());if(e==""||e==$(this).attr("data-placeholder")){$(this).removeClass("tipIt").val("")}});$(this).bind("focusout.inputtips",function(){var e=$.trim($(this).val());if(e==""||e==$(this).attr("data-placeholder")){$(this).addClass("tipIt").val($(this).attr("data-placeholder"))}});$(this).trigger("focusout.inputtips")})}
